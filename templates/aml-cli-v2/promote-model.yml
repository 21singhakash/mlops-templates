parameters:
  - name: deployment_name
    type: string
  - name: sample_request
    type: string

steps:
  - task: AzureCLI@2
    displayName: Test deployment
    inputs: 
      azureSubscription: $(ado_service_connection_rg) #needs to have access at the RG level 
      scriptType: bash
      workingDirectory: '$(System.DefaultWorkingDirectory)'
      scriptLocation: inlineScript
      inlineScript: |
        az ml model download --name $model_name
  - task: AzureCLI@2
    displayName: Connect to AML Workspace using CLI v2
    inputs:
      azureSubscription: $(ado_service_connection_aml_ws)
      scriptType: bash
      scriptLocation: inlineScript
      inlineScript: |
        az configure --defaults group=$(resource_group) workspace=$(aml_workspace)
  - task: AzureCLI@2
    displayName: Test deployment
    inputs: 
      azureSubscription: $(ado_service_connection_rg) #needs to have access at the RG level 
      scriptType: bash
      workingDirectory: '$(System.DefaultWorkingDirectory)'
      scriptLocation: inlineScript
      inlineScript: |
        az ml model create --name $model_name
  
    